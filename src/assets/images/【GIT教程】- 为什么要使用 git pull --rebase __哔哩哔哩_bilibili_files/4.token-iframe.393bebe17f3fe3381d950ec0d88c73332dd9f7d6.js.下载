(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{23:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="ac_time_value"},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){var t="",n=document.getElementById(e);return n&&n.innerText&&(t=n.innerText,n.remove()),t}},57:function(e,t,n){"use strict";n.r(t);var r=n(31),a=n.n(r),o=n(5),c=n.n(o),i=n(21),s=n.n(i),u=n(12),l=n.n(u),f=n(6),h=n.n(f),p=n(7),d=n.n(p),v=n(2),k=n.n(v),g=n(22),b=n.n(g),m=n(11),y=n.n(m),w=n(32),x=n.n(w),T=n(9),R=n(34),C=n.n(R),S=n(53),_=n.n(S),O=function(e){return j(e).catch((function(){if(e.fallbackUrl)return e.url=e.fallbackUrl,j(e)}))};function j(e){return e.contentType&&(e.headers=e.headers||{},e.headers["Content-Type"]=e.contentType),e.url=e.query?e.url+"?"+_.a.stringify(e.query):e.url,C()(e)}var L=n(56),P=n.n(L),I="undefined"==typeof window?"//passport.bilibili.co":"//passport.bilibili.com",B=function(e){var t={url:e.replace("https://","//").replace("http://","//"),method:"post",withCredentials:!0};return O(t)},q=n(23),E=n(24);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var U=function(e,t,n,r){var a,o=arguments.length,c=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y()(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(c=(o<3?a(c):o>3?a(t,n,c):a(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},A=function(e){h()(i,e);var t,n,r,o=J(i);function i(){var e;c()(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=o.call.apply(o,[this].concat(n)),b()(l()(e),"currentLongToken",""),b()(l()(e),"csrf",""),e}return s()(i,[{key:"mounted",value:function(){this.getCsrf(),this.getLongToken(),this.csrf&&this.currentLongToken&&this.handleRefreshCookie()}},{key:"getCsrf",value:function(){var e=Object(E.a)("1-name");e&&(this.csrf=e)}},{key:"getLongToken",value:function(){var e=Object(E.a)("1-value");e?(localStorage.setItem(q.a,e),this.currentLongToken=e):this.currentLongToken=localStorage.getItem(q.a)}},{key:"handleRefreshCookie",value:(r=a()(x.a.mark((function e(){var t,n,r,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o=this.csrf,c=this.currentLongToken,i=void 0,i={url:"".concat(I,"/x/passport-login/web/cookie/refresh"),method:"POST",params:{csrf:P.a.get("bili_jct"),refresh_csrf:o,source:"main_web",refresh_token:c},withCredentials:!0},O(i);case 3:if(0===(null==(a=e.sent)||null===(t=a.data)||void 0===t?void 0:t.code)&&null!=a&&null!==(n=a.data)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.refresh_token){e.next=6;break}return e.abrupt("return");case 6:localStorage.setItem(q.a,a.data.data.refresh_token),this.handleSetSSO(),this.handleConfirmRefresh(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("[error]",e.t0);case 14:case"end":return e.stop()}var o,c,i}),e,this,[[0,11]])}))),function(){return r.apply(this,arguments)})},{key:"handleSetSSO",value:(n=a()(x.a.mark((function e(){var t,n,r,a,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i=void 0,i={url:"".concat(I,"/web/sso/list"),method:"get",params:{biliCSRF:P.a.get("bili_jct")},withCredentials:!0},O(i);case 3:if(r=e.sent,null==(a=r.data)||null===(t=a.data)||void 0===t||null===(n=t.sso)||void 0===n||!n.length){e.next=9;break}return o=a.data.sso,e.next=9,c=o,Promise.all(c.map(B));case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}var c,i}),e,null,[[0,11]])}))),function(){return n.apply(this,arguments)})},{key:"handleConfirmRefresh",value:(t=a()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t=this.currentLongToken,n=void 0,n={url:"".concat(I,"/x/passport-login/web/confirm/refresh"),method:"POST",params:{csrf:P.a.get("bili_jct"),refresh_token:t},withCredentials:!0},O(n);case 3:if(0===e.sent.data.code){e.next=7;break}return e.abrupt("return");case 7:this.currentLongToken=localStorage.getItem(q.a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("[info-error]",e.t0);case 13:case"end":return e.stop()}var t,n}),e,this,[[0,10]])}))),function(){return t.apply(this,arguments)})}]),i}(T.b),D=A=U([T.a],A),F=n(8),$=Object(F.a)(D,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"1-iframe"})}),[],!1,null,null,null);t.default=$.exports}}]);